---
title: "Waterways Buffer"
author: "Craig O'Neill"
date: "May 17, 2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

##Libraries Needed

```{r}
library(tidyverse)
library(sf)
library(leaflet)
library(sp)
library(rgdal)
library(mapview)
```

##Load in KMZ (KML only at the moment)


```{r}
#Load the KML
location <- choose.files() #KML Only now

#Process the Layer Names and Numbers
layers <- st_layers(location)
lname <- layers$name


#Load all Layers in a ForLoop
datalist = list()
for(i in 1:NROW(lname)){
  dat <- st_read(location, layer = lname[i])
  dat$i <- i
  datalist[[i]] <- dat
}

#Combine All Layers into 1 SF File
mapfile <- do.call(rbind, datalist)

#View Map
mapview(mapfile)
```

##Load in the Most Recent Waterways Shapefiles

```{r}
#water <- choose.files()

riparian <- st_read("CA_shapefile_wetlands/CA_shapefile_wetlands/CA_Riparian.shp")

mapview(riparian)+
  mapview(mapfile)

```

